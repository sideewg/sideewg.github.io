<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Blog Maksym Lapa</title>
<style>
  :root {
    --bg-light: #f4f4f9;
    --text-light: #222;
    --bg-dark: #121212;
    --text-dark: #eee;
    --primary-light: #667eea;
    --primary-dark: #764ba2;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--bg-light);
    color: var(--text-light);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  body.dark {
    background-color: var(--bg-dark);
    color: var(--text-dark);
  }
  header {
    background: var(--primary-light);
    color: white;
    padding: 15px 30px;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  body.dark header {
    background: var(--primary-dark);
  }
  header h1 {
    margin: 0;
    font-size: 2.5rem;
    cursor: default;
  }
  nav {
    margin-top: 12px;
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
  }
  nav button {
    background: transparent;
    border: 2px solid white;
    color: white;
    padding: 8px 20px;
    font-size: 1rem;
    border-radius: 25px;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  nav button:hover,
  nav button.active {
    background-color: white;
    color: var(--primary-dark);
  }
  body.dark nav button:hover,
  body.dark nav button.active {
    background-color: white;
    color: var(--primary-dark);
  }

  main {
    flex-grow: 1;
    max-width: 900px;
    margin: 20px auto;
    width: 90%;
  }
  .post-list article {
    background: rgba(0, 0, 0, 0.05);
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  body.dark .post-list article {
    background: rgba(255, 255, 255, 0.1);
  }
  .post-list article:hover {
    background-color: rgba(0, 0, 0, 0.1);
  }
  body.dark .post-list article:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
  .post-list h2 {
    margin-bottom: 8px;
  }
  .post-list small {
    color: gray;
  }
  .post-list p {
    margin-top: 8px;
    color: #555;
  }
  body.dark .post-list p {
    color: #ccc;
  }

  .post-content {
    background: rgba(0,0,0,0.05);
    padding: 25px 30px;
    border-radius: 12px;
    line-height: 1.6;
  }
  body.dark .post-content {
    background: rgba(255, 255, 255, 0.1);
  }
  .post-content h2 {
    margin-top: 0;
  }
  .back-button {
    margin-top: 25px;
    background: var(--primary-light);
    border: none;
    color: white;
    padding: 10px 25px;
    font-size: 1rem;
    border-radius: 30px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .back-button:hover {
    background-color: var(--primary-dark);
  }
  body.dark .back-button {
    background: var(--primary-dark);
  }
  body.dark .back-button:hover {
    background-color: var(--primary-light);
  }

  .filter-bar {
    margin-bottom: 20px;
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    justify-content: center;
  }
  .filter-bar select,
  .filter-bar input[type="search"] {
    padding: 8px 12px;
    font-size: 1rem;
    border-radius: 8px;
    border: 1px solid #ccc;
    width: 200px;
  }
  body.dark .filter-bar select,
  body.dark .filter-bar input[type="search"] {
    background: #222;
    border-color: #555;
    color: #eee;
  }

  .toggle-theme {
    position: fixed;
    top: 15px;
    right: 15px;
    background: var(--primary-light);
    border: none;
    color: white;
    padding: 10px 18px;
    border-radius: 25px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    transition: background-color 0.3s ease;
    z-index: 1000;
  }
  .toggle-theme:hover {
    background: var(--primary-dark);
  }
  body.dark .toggle-theme {
    background: var(--primary-dark);
  }
  body.dark .toggle-theme:hover {
    background: var(--primary-light);
    color: #764ba2;
  }

  footer {
    text-align: center;
    padding: 15px 0;
    background: rgba(0,0,0,0.1);
    color: #666;
    font-size: 0.9rem;
  }
  body.dark footer {
    background: rgba(255,255,255,0.1);
    color: #aaa;
  }

  @media (max-width: 600px) {
    header h1 {
      font-size: 2rem;
    }
    nav button {
      padding: 6px 15px;
      font-size: 0.9rem;
    }
    main {
      width: 95%;
      margin: 15px auto;
    }
    .filter-bar select,
    .filter-bar input[type="search"] {
      width: 100%;
      max-width: 300px;
    }
  }
</style>
</head>
<body>

<button class="toggle-theme" title="Przełącz tryb ciemny/jasny">🌙</button>

<header>
  <h1>Blog Maksym Lapa</h1>
  <nav>
    <button id="nav-home" class="active">Strona główna</button>
    <button id="nav-about">O mnie</button>
  </nav>
</header>

<main id="app">
  <!-- Treść będzie tutaj -->
</main>

<footer>
  &copy; 2025 Maksym Lapa
</footer>

<script>
  const posts = [
    {
      id: 1,
      title: "Witaj na moim blogu!",
      date: "2025-05-23",
      category: "Wprowadzenie",
      content: `
        <p>To mój pierwszy wpis na blogu. Cieszę się, że tu jesteś!</p>
        <p>Będę dzielił się tutaj swoimi przemyśleniami o programowaniu, technologiach i życiu.</p>
      `,
      tags: ["wprowadzenie", "blog"]
    },
    {
      id: 2,
      title: "Dlaczego warto uczyć się JavaScript?",
      date: "2025-05-24",
      category: "Programowanie",
      content: `
        <p>JavaScript to język, który króluje na webie. Pozwala tworzyć dynamiczne i interaktywne strony.</p>
        <p>Warto go znać, bo to jedna z najpopularniejszych umiejętności na rynku pracy.</p>
      `,
      tags: ["javascript", "programowanie", "web"]
    },
    {
      id: 3,
      title: "Moje ulubione narzędzia programistyczne",
      date: "2025-05-25",
      category: "Programowanie",
      content: `
        <p>Uwielbiam Visual Studio Code, Git i GitHub — dzięki nim moja praca jest dużo prostsza.</p>
        <p>A Ty? Jakie masz ulubione narzędzia?</p>
      `,
      tags: ["narzędzia", "programowanie", "git"]
    },
    {
      id: 4,
      title: "Technologie, które mnie inspirują",
      date: "2025-05-26",
      category: "Technologie",
      content: `
        <p>Uwielbiam nowe technologie: AI, blockchain i rozwój aplikacji mobilnych.</p>
        <p>Przyszłość jest fascynująca!</p>
      `,
      tags: ["AI", "blockchain", "technologie"]
    }
  ];

  const aboutContent = `
    <article style="max-width:700px; margin: auto; line-height:1.6;">
      <h2>O mnie</h2>
      <p>Cześć! Jestem Maksym Lapa — pasjonat programowania i technologii.</p>
      <p>Na tym blogu dzielę się wiedzą i doświadczeniem oraz inspiracjami.</p>
      <p>Zapraszam do kontaktu i współpracy!</p>
      <p><strong>Email:</strong> <a href="mailto:maxym@example.com">maxym@example.com</a></p>
    </article>
  `;

  const app = document.getElementById('app');
  const navHomeBtn = document.getElementById('nav-home');
  const navAboutBtn = document.getElementById('nav-about');
  const toggleThemeBtn = document.querySelector('.toggle-theme');

  // Funkcja renderująca listę wpisów z opcją filtrowania i wyszukiwania
  function renderPostList(filterCategory = 'all', searchTerm = '') {
    navHomeBtn.classList.add('active');
    navAboutBtn.classList.remove('active');

    const filteredPosts = posts.filter(post => {
      const matchesCategory = filterCategory === 'all' || post.category === filterCategory;
      const lowerSearch = searchTerm.toLowerCase();
      const matchesSearch = post.title.toLowerCase().includes(lowerSearch) || post.content.toLowerCase().includes(lowerSearch);
      return matchesCategory && matchesSearch;
    });

    const categories = ['all', ...new Set(posts.map(p => p.category))];

    app.innerHTML = `
      <div class="filter-bar">
        <select id="categoryFilter" aria-label="Filtruj kategorię">
          ${categories.map(cat => `<option value="${cat}" ${cat === filterCategory ? 'selected' : ''}>${cat === 'all' ? 'Wszystkie kategorie' : cat}</option>`).join('')}
        </select>
        <input type="search" id="searchInput" placeholder="Szukaj..." aria-label="Szukaj wpisów" value="${searchTerm}" />
      </div>
      <section class="post-list" aria-live="polite" aria-relevant="additions removals">
        ${filteredPosts.length ? filteredPosts.map(post => `
          <article tabindex="0" role="button" data-id="${post.id}" aria-label="Wpis: ${post.title}">
            <h2>${post.title}</h2>
            <small>${post.date} | Kategoria: ${post.category}</small>
            <p>${post.content.substring(0, 120).replace(/<[^>]*>?/gm, '')}...</p>
          </article>
        `).join('') : '<p>Nie znaleziono wpisów pasujących do kryteriów.</p>'}
      </section>
    `;

    document.getElementById('categoryFilter').addEventListener('change', e => {
      renderPostList(e.target.value, document.getElementById('searchInput').value);
    });

    document.getElementById('searchInput').addEventListener('input', e => {
      renderPostList(document.getElementById('categoryFilter').value, e.target.value);
    });

    document.querySelectorAll('.post-list article').forEach(article => {
      article.addEventListener('click', () => {
        const id = parseInt(article.getAttribute('data-id'));
        renderPost(id);
      });
      article.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          article.click();
        }
      });
    });
  }

  // Funkcja renderująca pojedynczy wpis
  function renderPost(id) {
    navHomeBtn.classList.remove('active');
    navAboutBtn.classList.remove('active');

    const post = posts.find(p => p.id === id);
    if (!post) {
      app.innerHTML = `<p>Wpis nie znaleziony.</p>`;
      return;
    }

    app.innerHTML = `
      <article class="post-content" tabindex="0" aria-live="polite">
        <h2>${post.title}</h2>
        <small>${post.date} | Kategoria: ${post.category}</small>
        ${post.content}
        <button class="back-button" aria-label="Powrót do listy wpisów">← Powrót</button>
      </article>
    `;

    document.querySelector('.back-button').addEventListener('click', () => {
      renderPostList();
    });

    // Skupienie na artykule po załadowaniu
    document.querySelector('.post-content').focus();
  }

  // Funkcja renderująca stronę "O mnie"
  function renderAbout() {
    navHomeBtn.classList.remove('active');
    navAboutBtn.classList.add('active');
    app.innerHTML = aboutContent;
  }

  // Tryb ciemny / jasny
  function toggleTheme() {
    document.body.classList.toggle('dark');
    if(document.body.classList.contains('dark')) {
      toggleThemeBtn.textContent = '☀️';
      localStorage.setItem('theme', 'dark');
    } else {
      toggleThemeBtn.textContent = '🌙';
      localStorage.setItem('theme', 'light');
    }
  }

  toggleThemeBtn.addEventListener('click', toggleTheme);

  // Sprawdź zapamiętany motyw
  const savedTheme = localStorage.getItem('theme');
  if(savedTheme === 'dark') {
    document.body.classList.add('dark');
    toggleThemeBtn.textContent = '☀️';
  }

  // Nawigacja
  navHomeBtn.addEventListener('click', () => renderPostList());
  navAboutBtn.addEventListener('click', () => renderAbout());

  // Start - pokaż listę wpisów
  renderPostList();
</script>

</body>
</html>
